#!/usr/bin/env python
# -*- coding: utf-8 -*-

# Setup for the parsing pipeline for BigFoot files

# ## IMPORT ###
import argparse
from parser import SeqParser


def main():

    # ## Command-line Parser ###
    parser = argparse.ArgumentParser(description="Setup program to parse  \
        BigFoot's outputs and find motifs.\n From sequence alignment and  \
        prediction files, it produces a file showing found motifs according to\
        specific parameters. To have more information on BigFoot \
        http://sourceforge.net/projects/bigfoot/")

    parser.add_argument("mpd", help=".mpd file generated by BigFoot")

    parser.add_argument("pred", help=".pred file generated by BigFoot. \
        (Phylogenetic prediction file)")

    parser.add_argument("-t", "--thre", help="phylogenetic prediction threshold  \
        to be used, motifs with above phylogenetic score will be selected  \
        (default: %(default)s)", type=float, default=0.3)

    parser.add_argument("-a", "--align", help="alignment score threshold  \
        to be used, only motifs with alignment score higher than this \
        threshold will be selected (default: %(default)s)", type=float,
                        default=0.0)

    parser.add_argument("-o", "--out", help="name and location of output file  \
        (default: %(default)s)", default="results.txt")

    args = parser.parse_args()

    p = SeqParser(args.mpd, args.pred)
    p.parse()
    p.motifs(args.thre, args.align)
    p.write(args.out)

if __name__ == "__main__":
    main()
